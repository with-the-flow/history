<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>横版人物-特点连连看</title>
<style>
* {margin:0; padding:0; box-sizing:border-box;}
body{
    font-family:"Microsoft YaHei",sans-serif;
    background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:40px 20px;
}
h1{color:#2d3748;margin-bottom:30px;font-size:28px;letter-spacing:2px;}
.board{
    position:relative;
    width:100%;
    max-width:1200px;
}
.row{
    display:flex;
    justify-content:space-around;
    gap:20px;
    margin:20px 0;
}
.card{
    background:#fff;
    border-radius:12px;
    padding:14px 20px;
    box-shadow:0 4px 12px rgba(0,0,0,.08);
    cursor:pointer;
    user-select:none;
    font-size:15px;
    color:#333;
    border:2px solid transparent;
    transition:all .3s ease;
    text-align:center;
    flex:1 1 0;
}
.card:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.12);}
.card.sel{border-color:#3182ce;background:#ebf8ff;}
#svg{
    position:absolute;
    top:0;left:0;width:100%;height:100%;
    pointer-events:none;
    z-index:10;
}
button{
    margin-top:40px;padding:14px 40px;font-size:18px;color:#fff;background:#3182ce;border:none;border-radius:30px;cursor:pointer;box-shadow:0 4px 12px rgba(49,130,206,.4);
}
button:hover{background:#2b6cb0;}
#score{margin-top:20px;font-size:20px;color:#2d3748;}
</style>
</head>
<body>

<h1>横版人物-特点连连看</h1>

<div class="board">
    <!-- 人名行 -->
    <div class="row" id="nameRow"></div>
    <!-- 特点行 -->
    <div class="row" id="traitRow"></div>

    <!-- 画线层 -->
    <svg id="svg"></svg>
</div>

<button onclick="submit()">提交</button>
<div id="score"></div>

<script>
// 原始数据
const data = [
    {id:'mao', name:'毛泽东', trait:'面容瘦削，背有些驼，双目炯炯有神，像林肯，博览群书，富有反抗精神，善于斗争，有幽默感，工作一丝不苟。'},
    {id:'zhou', name:'周恩来', trait:'个人清瘦，中等身材，孩子气，眼睛大而热情，忠于理想，不屈不挠，平易近人，温和文雅，善于分析推理，讲究实际。'},
    {id:'he', name:'贺龙', trait:'大个子，虎背熊腰，年过半百仍健康，不知疲倦，背伤员行军，哥老会后代，宴会上面对枪声面不改色。'},
    {id:'peng', name:'彭德怀', trait:'不吸烟不喝酒，迟睡早起，每天睡四五小时，率直爽朗，乐观爱笑，才智出众，吃苦耐劳，爱护部下，善于作战。'},
    {id:'zhu', name:'朱德', trait:'貌不惊人，沉默谦虚，说话轻声，饱经沧桑，眼睛大，身材不高但结实，胳膊双腿如铁打，天性温和，与士兵同甘共苦，作战经验丰富。'},
    {id:'xu1', name:'徐海东', trait:'面露笑容，脸涨通红，门牙缺两，身材修长，肌肉发达，全身多处负伤，子弹穿头不死，仍像农村青年。'},
    {id:'lin', name:'林伯渠', trait:'五十五岁长征老战士，白发苍苍，神态庄严，满面春风，穿褪色制服，红星帽檐软垂，戴断腿眼镜，用绳子系耳朵。'},
    {id:'xu2', name:'徐特立', trait:'白发老翁，步履矫健，双目炯炯，健腿渡大河爬高山，贫农出身，六年私塾，长沙师范校长，赴法勤工俭学，白色恐怖中加入共产党，参加南昌起义。'}
];

// 随机打乱
function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
    }
}

// 初始化
function init(){
    const nameRow=document.getElementById('nameRow');
    const traitRow=document.getElementById('traitRow');
    nameRow.innerHTML='';traitRow.innerHTML='';svg.innerHTML='';
    lines=[];submitted=false;document.getElementById('score').textContent='';

    // 人名顺序随机
    shuffle(data);
    data.forEach(d=>{
        const div=document.createElement('div');
        div.className='card';div.dataset.id=d.id;div.dataset.side='name';
        div.textContent=d.name;
        nameRow.appendChild(div);
    });
    // 特点顺序再随机
    const tmp=[...data];shuffle(tmp);
    tmp.forEach(d=>{
        const div=document.createElement('div');
        div.className='card';div.dataset.id=d.id;div.dataset.side='trait';
        div.textContent=d.trait;
        traitRow.appendChild(div);
    });

    // 绑定点击
    document.querySelectorAll('#nameRow .card').forEach(c=>c.addEventListener('click',()=>clickCard(c,'name')));
    document.querySelectorAll('#traitRow .card').forEach(c=>c.addEventListener('click',()=>clickCard(c,'trait')));
}

let selName=null, selTrait=null;
const svg=document.getElementById('svg');
let lines=[], submitted=false;

// 获取中心点
function center(el){
    const r=el.getBoundingClientRect(), box=svg.getBoundingClientRect();
    return {x:r.left+r.width/2-box.left, y:r.top+r.height/2-box.top};
}

// 画线
function drawLine(nameCard,traitCard,color){
    const p1=center(nameCard), p2=center(traitCard);
    const line=document.createElementNS('http://www.w3.org/2000/svg','line');
    line.setAttribute('x1',p1.x);line.setAttribute('y1',p1.y);
    line.setAttribute('x2',p2.x);line.setAttribute('y2',p2.y);
    line.setAttribute('stroke',color);line.setAttribute('stroke-width',3);
    line.dataset.nameId=nameCard.dataset.id;
    line.dataset.traitId=traitCard.dataset.id;
    svg.appendChild(line); return line;
}

// 清除旧线
function clearLine(nameCard,traitCard){
    document.querySelectorAll(`line[data-name-id="${nameCard.dataset.id}"]`).forEach(n=>n.remove());
    document.querySelectorAll(`line[data-trait-id="${traitCard.dataset.id}"]`).forEach(n=>n.remove());
}

// 点击卡片
function clickCard(card,side){
    if(submitted) return;
    document.querySelectorAll('.card').forEach(c=>c.classList.remove('sel'));
    if(side==='name'){selName=card; card.classList.add('sel');}
    else{selTrait=card; card.classList.add('sel');}
    if(selName&&selTrait){
        clearLine(selName,selTrait);
        const line=drawLine(selName,selTrait,'#fbbf24'); // 黄色
        const idx=lines.findIndex(o=>o.name===selName);
        if(idx>=0) lines[idx]={name:selName, trait:selTrait, line};
        else lines.push({name:selName, trait:selTrait, line});
        selName.classList.remove('sel'); selTrait.classList.remove('sel');
        selName=selTrait=null;
    }
}

// 提交评分
function submit(){
    if(submitted) return;
    submitted=true;
    let correct=0;
    lines.forEach(o=>{
        const ok=o.name.dataset.id===o.trait.dataset.id;
        o.line.setAttribute('stroke',ok?'#16a34a':'#dc2626'); // 绿 / 红
        if(ok) correct++;
    });
    const score=Math.round(correct/8*100);
    document.getElementById('score').textContent=`得分：${score} 分`;
}

// 刷新即随机
window.onload=init;
</script>

</body>
</html>